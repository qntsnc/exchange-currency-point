{"ast":null,"code":"import _objectSpread from\"/Users/qntsnc/GolandProjects/exchange-point/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{format}from'date-fns';import{ru}from'date-fns/locale';import'./AnalyticsPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AnalyticsPage=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[analyticsData,setAnalyticsData]=useState(null);const[currencies,setCurrencies]=useState([]);const[filters,setFilters]=useState({startDate:format(new Date(),'yyyy-MM-dd'),endDate:format(new Date(),'yyyy-MM-dd'),currency:'all',operationType:'all'});const formatDecimal=value=>value===null||value===undefined?'N/A':parseFloat(value).toFixed(2);const formatRate=value=>value===null||value===undefined?'N/A':parseFloat(value).toFixed(4);const formatCurrency=value=>new Intl.NumberFormat('ru-RU',{style:'currency',currency:'RUB'}).format(value);const fetchCurrencies=useCallback(async()=>{try{const response=await fetch('http://localhost:8080/api/v1/currencies');if(!response.ok)throw new Error('Failed to fetch currencies');const data=await response.json();setCurrencies(data.data||[]);}catch(err){console.error('Error fetching currencies:',err);setError(prev=>prev?\"\".concat(prev,\"; \\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442: \").concat(err.message):\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442: \".concat(err.message));}},[]);const fetchAnalytics=useCallback(async()=>{setLoading(true);setError('');try{const url=new URL('http://localhost:8080/api/v1/analytics/operations');url.searchParams.append('start_date',filters.startDate);url.searchParams.append('end_date',filters.endDate);if(filters.currency!=='all'&&filters.currency)url.searchParams.append('currency_code',filters.currency);if(filters.operationType!=='all'&&filters.operationType)url.searchParams.append('operation_type',filters.operationType);const response=await fetch(url.toString());if(!response.ok){const errData=await response.json();throw new Error(errData.message||\"Failed to fetch analytics data (\".concat(response.status,\")\"));}const data=await response.json();setAnalyticsData(data.data||null);}catch(err){console.error('Error fetching analytics:',err);setError('Ошибка загрузки аналитических данных: '+err.message);setAnalyticsData(null);}finally{setLoading(false);}},[filters]);useEffect(()=>{fetchCurrencies();},[fetchCurrencies]);const handleFilterChange=e=>{const{name,value}=e.target;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleApplyFilters=()=>{fetchAnalytics();};const AnalyticsChart=_ref=>{let{title,data,labels,colors,type='bar'}=_ref;const total=data.reduce((sum,val)=>sum+val,0);if(type==='donut'){return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container donut-chart\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"chart-title\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"donut-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"donut\",children:data.map((value,i)=>{const percentage=total>0?value/total*100:0;return/*#__PURE__*/_jsx(\"div\",{className:\"donut-segment\",style:{'--percentage':\"\".concat(percentage),'--color':colors[i%colors.length],'--offset':data.slice(0,i).reduce((sum,val)=>sum+(total>0?val/total*100:0),0)}},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"donut-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"donut-total\",children:total}),/*#__PURE__*/_jsx(\"span\",{className:\"donut-label\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-legend\",children:labels.map((label,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color\",style:{backgroundColor:colors[i%colors.length]}}),/*#__PURE__*/_jsx(\"span\",{className:\"legend-label\",children:label}),/*#__PURE__*/_jsxs(\"span\",{className:\"legend-value\",children:[data[i],\" (\",total>0?(data[i]/total*100).toFixed(1):0,\"%)\"]})]},i))})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container bar-chart\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"chart-title\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"bars-wrapper\",children:data.map((value,i)=>{const percentage=total>0?value/total*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:labels[i]}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-track\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-fill\",style:{width:\"\".concat(percentage,\"%\"),backgroundColor:colors[i%colors.length]},children:/*#__PURE__*/_jsx(\"span\",{className:\"bar-value\",children:value})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-percentage\",children:[percentage.toFixed(1),\"%\"]})]},i);})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"\\uD83D\\uDCCA \\u0410\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-filters\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"filters-title\",children:\"\\uD83D\\uDD0D \\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B \\u0438 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC5 \\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:filters.startDate,onChange:handleFilterChange,className:\"filter-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC5 \\u041A\\u043E\\u043D\\u0435\\u0447\\u043D\\u0430\\u044F \\u0434\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:filters.endDate,onChange:handleFilterChange,className:\"filter-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCB1 \\u0412\\u0430\\u043B\\u044E\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"currency\",value:filters.currency,onChange:handleFilterChange,className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u0412\\u0441\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),currencies.map(curr=>/*#__PURE__*/_jsxs(\"option\",{value:curr.code,children:[curr.code,\" - \",curr.name]},curr.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDD04 \\u0422\\u0438\\u043F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"operationType\",value:filters.operationType,onChange:handleFilterChange,className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u0412\\u0441\\u0435 \\u0442\\u0438\\u043F\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"buy\",children:\"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sell\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filters-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyFilters,className:\"btn-apply-filters\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDD0D\"}),\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"]})})})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-icon\",children:\"\\u26A0\\uFE0F\"}),error]}),!loading&&!analyticsData&&!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u0442\\u0435 \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\\\" \\u0434\\u043B\\u044F \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0430\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"})]}),!loading&&analyticsData&&analyticsData.total_operations===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434 \\u0438 \\u0441 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043D\\u044B\\u043C\\u0438 \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u043C\\u0438 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})]}),!loading&&analyticsData&&analyticsData.total_operations>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-overview\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCC8 \\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card primary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:analyticsData.total_operations}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:formatCurrency(analyticsData.total_amount_rub)}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\u041E\\u0431\\u0449\\u0438\\u0439 \\u043E\\u0431\\u043E\\u0440\\u043E\\u0442\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card warning\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCE4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:analyticsData.client_sells_count}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-sublabel\",children:formatCurrency(analyticsData.client_sells_rub_total)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCE5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:analyticsData.client_buys_count}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043E\\u043A \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-sublabel\",children:formatCurrency(analyticsData.client_buys_rub_total)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"analytics-card\",children:/*#__PURE__*/_jsx(AnalyticsChart,{title:\"\\u0420\\u0430\\u0441\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\",data:[analyticsData.client_sells_count,analyticsData.client_buys_count],labels:['Продажи клиентов','Покупки клиентов'],colors:['#ef4444','#3b82f6'],type:\"donut\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\uD83D\\uDC8E \\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-list\",children:analyticsData.currency_volumes.slice(0,5).map((cv,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"currency-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"currency-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"currency-code\",children:cv.currency_code}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-name\",children:cv.currency_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"currency-stats\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"currency-volume\",children:formatDecimal(cv.volume)}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-rub\",children:formatCurrency(cv.rub_volume)})]})]},index))})]})]}),Object.keys(analyticsData.average_rates).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\uD83D\\uDCB9 \\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0435 \\u043A\\u0443\\u0440\\u0441\\u044B \\u0437\\u0430 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rates-grid\",children:Object.entries(analyticsData.average_rates).map(_ref2=>{let[currency,rate]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"rate-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rate-currency\",children:currency}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate-value\",children:[formatRate(rate),\" \\u20BD\"]})]},currency);})})]}),analyticsData.currency_volumes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\uD83D\\uDCCB \\u0414\\u0435\\u0442\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043F\\u043E \\u0432\\u0430\\u043B\\u044E\\u0442\\u0430\\u043C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"analytics-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0431\\u044A\\u0435\\u043C \\u0432 \\u0432\\u0430\\u043B\\u044E\\u0442\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0431\\u044A\\u0435\\u043C \\u0432 \\u0440\\u0443\\u0431\\u043B\\u044F\\u0445\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u043E\\u043B\\u044F \\u043E\\u0442 \\u043E\\u0431\\u0449\\u0435\\u0433\\u043E \\u043E\\u0431\\u043E\\u0440\\u043E\\u0442\\u0430\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:analyticsData.currency_volumes.map((cv,index)=>{const percentage=(cv.rub_volume/analyticsData.total_amount_rub*100).toFixed(1);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-currency-name\",children:cv.currency_name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-currency-code\",children:cv.currency_code})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-volume\",children:formatDecimal(cv.volume)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-rub-volume\",children:formatCurrency(cv.rub_volume)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"table-percentage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"percentage-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"percentage-fill\",style:{width:\"\".concat(percentage,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{children:[percentage,\"%\"]})]})})]},index);})})]})})]})]})]})]})});};export default AnalyticsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","format","ru","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AnalyticsPage","loading","setLoading","error","setError","analyticsData","setAnalyticsData","currencies","setCurrencies","filters","setFilters","startDate","Date","endDate","currency","operationType","formatDecimal","value","undefined","parseFloat","toFixed","formatRate","formatCurrency","Intl","NumberFormat","style","fetchCurrencies","response","fetch","ok","Error","data","json","err","console","prev","concat","message","fetchAnalytics","url","URL","searchParams","append","toString","errData","status","handleFilterChange","e","name","target","_objectSpread","handleApplyFilters","AnalyticsChart","_ref","title","labels","colors","type","total","reduce","sum","val","className","children","map","i","percentage","length","slice","label","backgroundColor","width","onChange","curr","code","id","onClick","disabled","total_operations","total_amount_rub","client_sells_count","client_sells_rub_total","client_buys_count","client_buys_rub_total","currency_volumes","cv","index","currency_code","currency_name","volume","rub_volume","Object","keys","average_rates","entries","_ref2","rate"],"sources":["/Users/qntsnc/GolandProjects/exchange-point/frontend/src/pages/AnalyticsPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport './AnalyticsPage.css';\n\nconst AnalyticsPage = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [analyticsData, setAnalyticsData] = useState(null);\n  const [currencies, setCurrencies] = useState([]);\n  const [filters, setFilters] = useState({\n    startDate: format(new Date(), 'yyyy-MM-dd'),\n    endDate: format(new Date(), 'yyyy-MM-dd'),\n    currency: 'all',\n    operationType: 'all'\n  });\n\n  const formatDecimal = (value) => (value === null || value === undefined ? 'N/A' : parseFloat(value).toFixed(2));\n  const formatRate = (value) => (value === null || value === undefined ? 'N/A' : parseFloat(value).toFixed(4));\n  const formatCurrency = (value) => new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' }).format(value);\n\n  const fetchCurrencies = useCallback(async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/v1/currencies');\n      if (!response.ok) throw new Error('Failed to fetch currencies');\n      const data = await response.json();\n      setCurrencies(data.data || []);\n    } catch (err) {\n      console.error('Error fetching currencies:', err);\n      setError(prev => prev ? `${prev}; Ошибка загрузки валют: ${err.message}` : `Ошибка загрузки валют: ${err.message}`);\n    }\n  }, []);\n\n  const fetchAnalytics = useCallback(async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const url = new URL('http://localhost:8080/api/v1/analytics/operations');\n      url.searchParams.append('start_date', filters.startDate);\n      url.searchParams.append('end_date', filters.endDate);\n      if (filters.currency !== 'all' && filters.currency) url.searchParams.append('currency_code', filters.currency);\n      if (filters.operationType !== 'all' && filters.operationType) url.searchParams.append('operation_type', filters.operationType);\n\n      const response = await fetch(url.toString());\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || `Failed to fetch analytics data (${response.status})`);\n      }\n      const data = await response.json();\n      setAnalyticsData(data.data || null);\n    } catch (err) {\n      console.error('Error fetching analytics:', err);\n      setError('Ошибка загрузки аналитических данных: ' + err.message);\n      setAnalyticsData(null);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters]);\n\n  useEffect(() => {\n    fetchCurrencies();\n  }, [fetchCurrencies]);\n\n  const handleFilterChange = (e) => {\n    const { name, value } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleApplyFilters = () => {\n    fetchAnalytics();\n  };\n\n  const AnalyticsChart = ({ title, data, labels, colors, type = 'bar' }) => {\n    const total = data.reduce((sum, val) => sum + val, 0);\n    \n    if (type === 'donut') {\n      return (\n        <div className=\"chart-container donut-chart\">\n          <h4 className=\"chart-title\">{title}</h4>\n          <div className=\"donut-wrapper\">\n            <div className=\"donut\">\n              {data.map((value, i) => {\n                const percentage = total > 0 ? (value / total) * 100 : 0;\n                return (\n                  <div\n                    key={i}\n                    className=\"donut-segment\"\n                    style={{\n                      '--percentage': `${percentage}`,\n                      '--color': colors[i % colors.length],\n                      '--offset': data.slice(0, i).reduce((sum, val) => sum + (total > 0 ? (val / total) * 100 : 0), 0)\n                    }}\n                  />\n                );\n              })}\n            </div>\n            <div className=\"donut-center\">\n              <span className=\"donut-total\">{total}</span>\n              <span className=\"donut-label\">Всего</span>\n            </div>\n          </div>\n          <div className=\"chart-legend\">\n            {labels.map((label, i) => (\n              <div key={i} className=\"legend-item\">\n                <div \n                  className=\"legend-color\" \n                  style={{ backgroundColor: colors[i % colors.length] }}\n                />\n                <span className=\"legend-label\">{label}</span>\n                <span className=\"legend-value\">{data[i]} ({total > 0 ? ((data[i] / total) * 100).toFixed(1) : 0}%)</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"chart-container bar-chart\">\n        <h4 className=\"chart-title\">{title}</h4>\n        <div className=\"bars-wrapper\">\n          {data.map((value, i) => {\n            const percentage = total > 0 ? (value / total) * 100 : 0;\n            return (\n              <div key={i} className=\"bar-item\">\n                <div className=\"bar-label\">{labels[i]}</div>\n                <div className=\"bar-track\">\n                  <div\n                    className=\"bar-fill\"\n                    style={{\n                      width: `${percentage}%`,\n                      backgroundColor: colors[i % colors.length],\n                    }}\n                  >\n                    <span className=\"bar-value\">{value}</span>\n                  </div>\n                </div>\n                <div className=\"bar-percentage\">{percentage.toFixed(1)}%</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"main-content\">\n      <div className=\"container\">\n        <h1 className=\"page-title\">📊 Аналитика операций</h1>\n\n        {/* Фильтры */}\n        <div className=\"analytics-filters\">\n          <h2 className=\"filters-title\">🔍 Фильтры и настройки</h2>\n          \n          <div className=\"filters-grid\">\n            <div className=\"filter-field\">\n              <label>📅 Начальная дата</label>\n              <input\n                type=\"date\"\n                name=\"startDate\"\n                value={filters.startDate}\n                onChange={handleFilterChange}\n                className=\"filter-input\"\n              />\n            </div>\n            \n            <div className=\"filter-field\">\n              <label>📅 Конечная дата</label>\n              <input\n                type=\"date\"\n                name=\"endDate\"\n                value={filters.endDate}\n                onChange={handleFilterChange}\n                className=\"filter-input\"\n              />\n            </div>\n            \n            <div className=\"filter-field\">\n              <label>💱 Валюта</label>\n              <select\n                name=\"currency\"\n                value={filters.currency}\n                onChange={handleFilterChange}\n                className=\"filter-select\"\n              >\n                <option value=\"all\">Все валюты</option>\n                {currencies.map(curr => (\n                  <option key={curr.id} value={curr.code}>\n                    {curr.code} - {curr.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div className=\"filter-field\">\n              <label>🔄 Тип операции</label>\n              <select\n                name=\"operationType\"\n                value={filters.operationType}\n                onChange={handleFilterChange}\n                className=\"filter-select\"\n              >\n                <option value=\"all\">Все типы</option>\n                <option value=\"buy\">Покупка валюты</option>\n                <option value=\"sell\">Продажа валюты</option>\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"filters-actions\">\n            <button\n              onClick={handleApplyFilters}\n              className=\"btn-apply-filters\"\n              disabled={loading}\n            >\n              {loading ? (\n                <>\n                  <div className=\"loader\"></div>\n                  Загрузка...\n                </>\n              ) : (\n                <>\n                  <span>🔍</span>\n                  Применить фильтры\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Ошибка */}\n        {error && (\n          <div className=\"alert alert-error\">\n            <span className=\"alert-icon\">⚠️</span>\n            {error}\n          </div>\n        )}\n\n        {/* Пустое состояние */}\n        {!loading && !analyticsData && !error && (\n          <div className=\"empty-state\">\n            <div className=\"empty-icon\">📊</div>\n            <h3>Данные не загружены</h3>\n            <p>Настройте фильтры и нажмите \"Применить фильтры\" для загрузки аналитических данных</p>\n          </div>\n        )}\n\n        {/* Нет данных */}\n        {!loading && analyticsData && analyticsData.total_operations === 0 && (\n          <div className=\"empty-state\">\n            <div className=\"empty-icon\">📭</div>\n            <h3>Нет данных</h3>\n            <p>За выбранный период и с указанными фильтрами операций не найдено</p>\n          </div>\n        )}\n\n        {/* Основные данные */}\n        {!loading && analyticsData && analyticsData.total_operations > 0 && (\n          <div className=\"analytics-content\">\n            {/* Основная статистика */}\n            <div className=\"analytics-overview\">\n              <h2 className=\"section-title\">📈 Общая статистика</h2>\n              \n              <div className=\"stats-grid\">\n                <div className=\"stat-card primary\">\n                  <div className=\"stat-icon\">📊</div>\n                  <div className=\"stat-content\">\n                    <div className=\"stat-value\">{analyticsData.total_operations}</div>\n                    <div className=\"stat-label\">Всего операций</div>\n                  </div>\n                </div>\n                \n                <div className=\"stat-card success\">\n                  <div className=\"stat-icon\">💰</div>\n                  <div className=\"stat-content\">\n                    <div className=\"stat-value\">{formatCurrency(analyticsData.total_amount_rub)}</div>\n                    <div className=\"stat-label\">Общий оборот</div>\n                  </div>\n                </div>\n                \n                <div className=\"stat-card warning\">\n                  <div className=\"stat-icon\">📤</div>\n                  <div className=\"stat-content\">\n                    <div className=\"stat-value\">{analyticsData.client_sells_count}</div>\n                    <div className=\"stat-label\">Продаж клиентами</div>\n                    <div className=\"stat-sublabel\">{formatCurrency(analyticsData.client_sells_rub_total)}</div>\n                  </div>\n                </div>\n                \n                <div className=\"stat-card info\">\n                  <div className=\"stat-icon\">📥</div>\n                  <div className=\"stat-content\">\n                    <div className=\"stat-value\">{analyticsData.client_buys_count}</div>\n                    <div className=\"stat-label\">Покупок клиентами</div>\n                    <div className=\"stat-sublabel\">{formatCurrency(analyticsData.client_buys_rub_total)}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Графики и детальная статистика */}\n            <div className=\"analytics-details\">\n              <div className=\"analytics-row\">\n                {/* Распределение операций */}\n                <div className=\"analytics-card\">\n                  <AnalyticsChart\n                    title=\"Распределение операций\"\n                    data={[analyticsData.client_sells_count, analyticsData.client_buys_count]}\n                    labels={['Продажи клиентов', 'Покупки клиентов']}\n                    colors={['#ef4444', '#3b82f6']}\n                    type=\"donut\"\n                  />\n                </div>\n\n                {/* Популярные валюты */}\n                <div className=\"analytics-card\">\n                  <h3 className=\"card-title\">💎 Популярные валюты</h3>\n                  <div className=\"currency-list\">\n                    {analyticsData.currency_volumes.slice(0, 5).map((cv, index) => (\n                      <div key={index} className=\"currency-item\">\n                        <div className=\"currency-info\">\n                          <div className=\"currency-code\">{cv.currency_code}</div>\n                          <div className=\"currency-name\">{cv.currency_name}</div>\n                        </div>\n                        <div className=\"currency-stats\">\n                          <div className=\"currency-volume\">{formatDecimal(cv.volume)}</div>\n                          <div className=\"currency-rub\">{formatCurrency(cv.rub_volume)}</div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Средние курсы */}\n              {Object.keys(analyticsData.average_rates).length > 0 && (\n                <div className=\"analytics-card full-width\">\n                  <h3 className=\"card-title\">💹 Средние курсы за период</h3>\n                  <div className=\"rates-grid\">\n                    {Object.entries(analyticsData.average_rates).map(([currency, rate]) => (\n                      <div key={currency} className=\"rate-card\">\n                        <div className=\"rate-currency\">{currency}</div>\n                        <div className=\"rate-value\">{formatRate(rate)} ₽</div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Подробная таблица валют */}\n              {analyticsData.currency_volumes.length > 0 && (\n                <div className=\"analytics-card full-width\">\n                  <h3 className=\"card-title\">📋 Детальная статистика по валютам</h3>\n                  <div className=\"table-container\">\n                    <table className=\"analytics-table\">\n                      <thead>\n                        <tr>\n                          <th>Валюта</th>\n                          <th>Код</th>\n                          <th>Объем в валюте</th>\n                          <th>Объем в рублях</th>\n                          <th>Доля от общего оборота</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {analyticsData.currency_volumes.map((cv, index) => {\n                          const percentage = (cv.rub_volume / analyticsData.total_amount_rub * 100).toFixed(1);\n                          return (\n                            <tr key={index}>\n                              <td>\n                                <div className=\"table-currency-name\">{cv.currency_name}</div>\n                              </td>\n                              <td>\n                                <div className=\"table-currency-code\">{cv.currency_code}</div>\n                              </td>\n                              <td>\n                                <div className=\"table-volume\">{formatDecimal(cv.volume)}</div>\n                              </td>\n                              <td>\n                                <div className=\"table-rub-volume\">{formatCurrency(cv.rub_volume)}</div>\n                              </td>\n                              <td>\n                                <div className=\"table-percentage\">\n                                  <div className=\"percentage-bar\">\n                                    <div \n                                      className=\"percentage-fill\" \n                                      style={{ width: `${percentage}%` }}\n                                    />\n                                  </div>\n                                  <span>{percentage}%</span>\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AnalyticsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}