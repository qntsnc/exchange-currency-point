{"ast":null,"code":"import _objectSpread from\"/Users/qntsnc/GolandProjects/exchange-point/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{format,parseISO,isValid}from'date-fns';import{ru}from'date-fns/locale';import'./CurrenciesPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CurrenciesPage=()=>{const[currencies,setCurrencies]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[newCurrency,setNewCurrency]=useState({code:'',name:'',buy_rate:'',sell_rate:''});const[editCurrency,setEditCurrency]=useState(null);const[activeTab,setActiveTab]=useState('currencies');const[operationLimits,setOperationLimits]=useState([{id:1,limit_name:'daily_currency_volume',limit_value:'5000.0',friendly_name:'Дневной лимит по валюте',description:'Максимальный объем операций с иностранной валютой для клиента за день',updated_at:new Date().toISOString()},{id:2,limit_name:'single_operation_amount',limit_value:'1000.0',friendly_name:'Лимит одной операции',description:'Максимальная сумма одной операции',updated_at:new Date().toISOString()}]);const[editingLimit,setEditingLimit]=useState(null);const fetchCurrencies=useCallback(async()=>{setLoading(true);setError('');try{const response=await fetch('http://localhost:8080/api/v1/currencies');if(!response.ok){const errData=await response.json();throw new Error(errData.message||\"Network response was not ok (\".concat(response.status,\")\"));}const data=await response.json();setCurrencies(data.data||[]);}catch(err){setError('Ошибка загрузки валют: '+err.message);console.error('Fetch currencies error:',err);}finally{setLoading(false);}},[]);const handleCreateCurrency=async e=>{e.preventDefault();setLoading(true);setError('');try{if(!newCurrency.code||!newCurrency.name||!newCurrency.buy_rate||!newCurrency.sell_rate){throw new Error('Все поля обязательны');}const buyRate=parseFloat(newCurrency.buy_rate);const sellRate=parseFloat(newCurrency.sell_rate);if(isNaN(buyRate)||buyRate<=0){throw new Error('Курс покупки должен быть положительным числом');}if(isNaN(sellRate)||sellRate<=0){throw new Error('Курс продажи должен быть положительным числом');}const payload={code:newCurrency.code,name:newCurrency.name,buy_rate:Number(buyRate.toFixed(8)),sell_rate:Number(sellRate.toFixed(8))};const response=await fetch('http://localhost:8080/api/v1/currencies',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){const errData=await response.json();throw new Error(errData.message||\"Failed to create currency (\".concat(response.status,\")\"));}fetchCurrencies();setNewCurrency({code:'',name:'',buy_rate:'',sell_rate:''});}catch(err){setError('Ошибка создания валюты: '+err.message);console.error('Create currency error:',err);}finally{setLoading(false);}};const handleUpdateCurrency=async e=>{e.preventDefault();if(!editCurrency)return;setLoading(true);setError('');try{if(!editCurrency.code||!editCurrency.buy_rate||!editCurrency.sell_rate){throw new Error('Все поля обязательны');}const buyRate=parseFloat(editCurrency.buy_rate);const sellRate=parseFloat(editCurrency.sell_rate);if(isNaN(buyRate)||buyRate<=0){throw new Error('Курс покупки должен быть положительным числом');}if(isNaN(sellRate)||sellRate<=0){throw new Error('Курс продажи должен быть положительным числом');}const payload={code:editCurrency.code,buy_rate:Number(buyRate.toFixed(8)),sell_rate:Number(sellRate.toFixed(8))};const response=await fetch('http://localhost:8080/api/v1/currencies',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){let message=\"Failed to update currency (\".concat(response.status,\")\");try{const errData=await response.json();message=errData.message||message;if(message.includes('not found')){message='Валюта не найдена';}else if(message.includes('Invalid buy_rate')){message='Неверный формат курса покупки';}else if(message.includes('Invalid sell_rate')){message='Неверный формат курса продажи';}}catch(jsonErr){console.error('Error parsing error response:',jsonErr);}throw new Error(message);}fetchCurrencies();setEditCurrency(null);}catch(err){setError('Ошибка обновления валюты: '+err.message);console.error('Update currency error:',err);}finally{setLoading(false);}};const handleUpdateLimit=e=>{e.preventDefault();if(!editingLimit)return;setOperationLimits(prev=>prev.map(limit=>limit.id===editingLimit.id?_objectSpread(_objectSpread({},limit),{},{limit_value:editingLimit.limit_value,updated_at:new Date().toISOString()}):limit));setEditingLimit(null);};useEffect(()=>{fetchCurrencies();},[fetchCurrencies]);const formatRate=rateStr=>{if(!rateStr)return'N/A';const num=parseFloat(rateStr);return isNaN(num)?rateStr:num.toFixed(6);};const formatDate=dateTimeStr=>{if(!dateTimeStr)return'Не указано';try{const date=new Date(dateTimeStr);if(!isNaN(date.getTime())){return date.toLocaleString('ru-RU');}return'Некорректная дата';}catch(error){console.error('Ошибка обработки даты:',error);return'Ошибка даты';}};const averageSpread=currencies.length>0?(currencies.reduce((sum,curr)=>{const buyRate=parseFloat(curr.buy_rate);const sellRate=parseFloat(curr.sell_rate);return sum+(buyRate-sellRate)/sellRate*100;},0)/currencies.length).toFixed(2):0;return/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"\\uD83D\\uDCB1 \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-navigation\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tabs-container\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"nav-tab \".concat(activeTab==='currencies'?'active':''),onClick:()=>setActiveTab('currencies'),title:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u043D\\u044B\\u043C\\u0438 \\u043A\\u0443\\u0440\\u0441\\u0430\\u043C\\u0438 \\u0438 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0445 \\u0432\\u0430\\u043B\\u044E\\u0442\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-text\",children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u044B \\u0438 \\u043A\\u0443\\u0440\\u0441\\u044B\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"nav-tab \".concat(activeTab==='limits'?'active':''),onClick:()=>setActiveTab('limits'),title:\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0430 \\u043B\\u0438\\u043C\\u0438\\u0442\\u043E\\u0432 \\u0438 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u0439 \\u0434\\u043B\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439 \\u043E\\u0431\\u043C\\u0435\\u043D\\u0430\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:\"\\u2699\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-text\",children:\"\\u041E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"})]})]})}),activeTab==='currencies'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"currency-form-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:editCurrency?'✏️ Редактирование валюты':'➕ Добавить новую валюту'}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-icon\",children:\"\\u26A0\\uFE0F\"}),error]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:editCurrency?handleUpdateCurrency:handleCreateCurrency,className:\"currency-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83C\\uDFF7\\uFE0F \\u041A\\u043E\\u0434 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"input\",{value:editCurrency?editCurrency.code:newCurrency.code,onChange:e=>editCurrency?setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{code:e.target.value})):setNewCurrency(_objectSpread(_objectSpread({},newCurrency),{},{code:e.target.value})),placeholder:\"USD, EUR, GBP...\",required:true,disabled:editCurrency!==null,className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCDD \\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{value:editCurrency?editCurrency.name:newCurrency.name,onChange:e=>editCurrency?setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{name:e.target.value})):setNewCurrency(_objectSpread(_objectSpread({},newCurrency),{},{name:e.target.value})),placeholder:\"\\u0414\\u043E\\u043B\\u043B\\u0430\\u0440 \\u0421\\u0428\\u0410...\",required:true,disabled:editCurrency!==null,className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC8 \\u041A\\u0443\\u0440\\u0441 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438 \\u20BD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:editCurrency?editCurrency.buy_rate:newCurrency.buy_rate,onChange:e=>editCurrency?setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{buy_rate:e.target.value})):setNewCurrency(_objectSpread(_objectSpread({},newCurrency),{},{buy_rate:e.target.value})),placeholder:\"90.50\",required:true,className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC9 \\u041A\\u0443\\u0440\\u0441 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438 \\u20BD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:editCurrency?editCurrency.sell_rate:newCurrency.sell_rate,onChange:e=>editCurrency?setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{sell_rate:e.target.value})):setNewCurrency(_objectSpread(_objectSpread({},newCurrency),{},{sell_rate:e.target.value})),placeholder:\"89.50\",required:true,className:\"form-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),\"\\u041E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0430...\"]}):editCurrency?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCBE\"}),\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0432\\u0430\\u043B\\u044E\\u0442\\u0443\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2795\"}),\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432\\u0430\\u043B\\u044E\\u0442\\u0443\"]})}),editCurrency&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setEditCurrency(null),className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2716\\uFE0F\"}),\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"currencies-list-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDCCB \\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0432\\u0430\\u043B\\u044E\\u0442\"}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0432\\u0430\\u043B\\u044E\\u0442...\"})]}),!loading&&currencies.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCB1\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u0441 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u043F\\u0435\\u0440\\u0432\\u043E\\u0439 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B \\u0434\\u043B\\u044F \\u043E\\u0431\\u043C\\u0435\\u043D\\u0430\"})]}),!loading&&currencies.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"currencies-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCB1 \\u041A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCB0 \\u041A\\u0443\\u0440\\u0441 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCB0 \\u041A\\u0443\\u0440\\u0441 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCCA \\u0421\\u043F\\u0440\\u0435\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDD52 \\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u2699\\uFE0F \\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currencies.map(currency=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:currency.code}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-name\",children:currency.name})]}),/*#__PURE__*/_jsx(\"td\",{children:editCurrency&&editCurrency.id===currency.id?/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editCurrency.buy_rate||'',onChange:e=>setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{buy_rate:e.target.value})),className:\"rate-input\"}):currency.buy_rate.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:editCurrency&&editCurrency.id===currency.id?/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:editCurrency.sell_rate||'',onChange:e=>setEditCurrency(_objectSpread(_objectSpread({},editCurrency),{},{sell_rate:e.target.value})),className:\"rate-input\"}):currency.sell_rate.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"spread\",children:[((currency.sell_rate-currency.buy_rate)/currency.buy_rate*100).toFixed(2),\"%\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"updated-time\",children:new Date(currency.updated_at).toLocaleDateString()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:editCurrency&&editCurrency.id===currency.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateCurrency,className:\"btn-save\",title:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditCurrency(null),className:\"btn-cancel\",title:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\",children:\"\\u2715\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditCurrency(_objectSpread({},currency)),className:\"btn-edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",children:\"\\u270E\"})})})]},currency.id))})]})})]})]}),activeTab==='limits'&&/*#__PURE__*/_jsx(\"div\",{className:\"tab-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"limits-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\u2699\\uFE0F \\u041E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"limits-grid\",children:operationLimits.map(limit=>/*#__PURE__*/_jsxs(\"div\",{className:\"limit-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"limit-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"limit-value-display\",children:editingLimit&&editingLimit.id===limit.id?/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.0001\",value:editingLimit.limit_value,onChange:e=>setEditingLimit(_objectSpread(_objectSpread({},editingLimit),{},{limit_value:e.target.value})),className:\"limit-input\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"limit-value\",children:[formatRate(limit.limit_value),\" \\u20BD\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"limit-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"limit-name\",children:limit.friendly_name}),/*#__PURE__*/_jsx(\"div\",{className:\"limit-description\",children:limit.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"limit-updated\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"updated-label\",children:\"\\uD83D\\uDCC5 \\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"updated-value\",children:formatDate(limit.updated_at)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"limit-actions\",children:editingLimit&&editingLimit.id===limit.id?/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleUpdateLimit,className:\"btn-save\",title:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCBE\"}),\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditingLimit(null),className:\"btn-cancel\",title:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u274C\"}),\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"]})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditingLimit(_objectSpread({},limit)),className:\"btn-edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u270F\\uFE0F\"}),\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]})})]},limit.id))})]})})]})});};export default CurrenciesPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","format","parseISO","isValid","ru","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CurrenciesPage","currencies","setCurrencies","loading","setLoading","error","setError","newCurrency","setNewCurrency","code","name","buy_rate","sell_rate","editCurrency","setEditCurrency","activeTab","setActiveTab","operationLimits","setOperationLimits","id","limit_name","limit_value","friendly_name","description","updated_at","Date","toISOString","editingLimit","setEditingLimit","fetchCurrencies","response","fetch","ok","errData","json","Error","message","concat","status","data","err","console","handleCreateCurrency","e","preventDefault","buyRate","parseFloat","sellRate","isNaN","payload","Number","toFixed","method","headers","body","JSON","stringify","handleUpdateCurrency","includes","jsonErr","handleUpdateLimit","prev","map","limit","_objectSpread","formatRate","rateStr","num","formatDate","dateTimeStr","date","getTime","toLocaleString","averageSpread","length","reduce","sum","curr","className","children","onClick","title","onSubmit","value","onChange","target","placeholder","required","disabled","type","step","currency","toLocaleDateString"],"sources":["/Users/qntsnc/GolandProjects/exchange-point/frontend/src/pages/CurrenciesPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { format, parseISO, isValid } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport './CurrenciesPage.css';\n\nconst CurrenciesPage = () => {\n  const [currencies, setCurrencies] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [newCurrency, setNewCurrency] = useState({ code: '', name: '', buy_rate: '', sell_rate: '' });\n  const [editCurrency, setEditCurrency] = useState(null);\n  const [activeTab, setActiveTab] = useState('currencies');\n  const [operationLimits, setOperationLimits] = useState([\n    { \n      id: 1, \n      limit_name: 'daily_currency_volume', \n      limit_value: '5000.0', \n      friendly_name: 'Дневной лимит по валюте',\n      description: 'Максимальный объем операций с иностранной валютой для клиента за день', \n      updated_at: new Date().toISOString() \n    },\n    { \n      id: 2, \n      limit_name: 'single_operation_amount', \n      limit_value: '1000.0', \n      friendly_name: 'Лимит одной операции',\n      description: 'Максимальная сумма одной операции', \n      updated_at: new Date().toISOString() \n    },\n  ]);\n  const [editingLimit, setEditingLimit] = useState(null);\n\n  const fetchCurrencies = useCallback(async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await fetch('http://localhost:8080/api/v1/currencies');\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || `Network response was not ok (${response.status})`);\n      }\n      const data = await response.json();\n      setCurrencies(data.data || []);\n    } catch (err) {\n      setError('Ошибка загрузки валют: ' + err.message);\n      console.error('Fetch currencies error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const handleCreateCurrency = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      if (!newCurrency.code || !newCurrency.name || !newCurrency.buy_rate || !newCurrency.sell_rate) {\n        throw new Error('Все поля обязательны');\n      }\n      const buyRate = parseFloat(newCurrency.buy_rate);\n      const sellRate = parseFloat(newCurrency.sell_rate);\n      if (isNaN(buyRate) || buyRate <= 0) {\n        throw new Error('Курс покупки должен быть положительным числом');\n      }\n      if (isNaN(sellRate) || sellRate <= 0) {\n        throw new Error('Курс продажи должен быть положительным числом');\n      }\n\n      const payload = {\n        code: newCurrency.code,\n        name: newCurrency.name,\n        buy_rate: Number(buyRate.toFixed(8)),\n        sell_rate: Number(sellRate.toFixed(8)),\n      };\n\n      const response = await fetch('http://localhost:8080/api/v1/currencies', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || `Failed to create currency (${response.status})`);\n      }\n      fetchCurrencies();\n      setNewCurrency({ code: '', name: '', buy_rate: '', sell_rate: '' });\n    } catch (err) {\n      setError('Ошибка создания валюты: ' + err.message);\n      console.error('Create currency error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateCurrency = async (e) => {\n    e.preventDefault();\n    if (!editCurrency) return;\n    setLoading(true);\n    setError('');\n    try {\n      if (!editCurrency.code || !editCurrency.buy_rate || !editCurrency.sell_rate) {\n        throw new Error('Все поля обязательны');\n      }\n      const buyRate = parseFloat(editCurrency.buy_rate);\n      const sellRate = parseFloat(editCurrency.sell_rate);\n      if (isNaN(buyRate) || buyRate <= 0) {\n        throw new Error('Курс покупки должен быть положительным числом');\n      }\n      if (isNaN(sellRate) || sellRate <= 0) {\n        throw new Error('Курс продажи должен быть положительным числом');\n      }\n\n      const payload = {\n        code: editCurrency.code,\n        buy_rate: Number(buyRate.toFixed(8)),\n        sell_rate: Number(sellRate.toFixed(8)),\n      };\n\n      const response = await fetch('http://localhost:8080/api/v1/currencies', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      if (!response.ok) {\n        let message = `Failed to update currency (${response.status})`;\n        try {\n          const errData = await response.json();\n          message = errData.message || message;\n          if (message.includes('not found')) {\n            message = 'Валюта не найдена';\n          } else if (message.includes('Invalid buy_rate')) {\n            message = 'Неверный формат курса покупки';\n          } else if (message.includes('Invalid sell_rate')) {\n            message = 'Неверный формат курса продажи';\n          }\n        } catch (jsonErr) {\n          console.error('Error parsing error response:', jsonErr);\n        }\n        throw new Error(message);\n      }\n      fetchCurrencies();\n      setEditCurrency(null);\n    } catch (err) {\n      setError('Ошибка обновления валюты: ' + err.message);\n      console.error('Update currency error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateLimit = (e) => {\n    e.preventDefault();\n    if (!editingLimit) return;\n    setOperationLimits(prev =>\n      prev.map(limit =>\n        limit.id === editingLimit.id ? { ...limit, limit_value: editingLimit.limit_value, updated_at: new Date().toISOString() } : limit\n      )\n    );\n    setEditingLimit(null);\n  };\n\n  useEffect(() => {\n    fetchCurrencies();\n  }, [fetchCurrencies]);\n\n  const formatRate = (rateStr) => {\n    if (!rateStr) return 'N/A';\n    const num = parseFloat(rateStr);\n    return isNaN(num) ? rateStr : num.toFixed(6);\n  };\n\n  const formatDate = (dateTimeStr) => {\n    if (!dateTimeStr) return 'Не указано';\n    try {\n      const date = new Date(dateTimeStr);\n      if (!isNaN(date.getTime())) {\n        return date.toLocaleString('ru-RU');\n      }\n      return 'Некорректная дата';\n    } catch (error) {\n      console.error('Ошибка обработки даты:', error);\n      return 'Ошибка даты';\n    }\n  };\n\n  const averageSpread = currencies.length > 0 \n    ? (currencies.reduce((sum, curr) => {\n        const buyRate = parseFloat(curr.buy_rate);\n        const sellRate = parseFloat(curr.sell_rate);\n        return sum + ((buyRate - sellRate) / sellRate * 100);\n      }, 0) / currencies.length).toFixed(2)\n    : 0;\n\n  return (\n    <div className=\"main-content\">\n      <div className=\"container\">\n        <h1 className=\"page-title\">💱 Управление валютами</h1>\n\n        {/* Навигационные табы */}\n        <div className=\"currency-navigation\">\n          <div className=\"tabs-container\">\n            <button \n              className={`nav-tab ${activeTab === 'currencies' ? 'active' : ''}`}\n              onClick={() => setActiveTab('currencies')}\n              title=\"Управление валютными курсами и добавление новых валют\"\n            >\n              <span className=\"tab-icon\">💰</span>\n              <span className=\"tab-text\">Валюты и курсы</span>\n            </button>\n            <button \n              className={`nav-tab ${activeTab === 'limits' ? 'active' : ''}`}\n              onClick={() => setActiveTab('limits')}\n              title=\"Настройка лимитов и ограничений для операций обмена\"\n            >\n              <span className=\"tab-icon\">⚙️</span>\n              <span className=\"tab-text\">Ограничения операций</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Содержимое табов */}\n        {activeTab === 'currencies' && (\n          <div className=\"tab-content\">\n            {/* Форма добавления/редактирования валюты */}\n            <div className=\"currency-form-section\">\n              <h2 className=\"section-title\">\n                {editCurrency ? '✏️ Редактирование валюты' : '➕ Добавить новую валюту'}\n              </h2>\n              \n              {error && (\n                <div className=\"alert alert-error\">\n                  <span className=\"alert-icon\">⚠️</span>\n                  {error}\n                </div>\n              )}\n\n              <form onSubmit={editCurrency ? handleUpdateCurrency : handleCreateCurrency} className=\"currency-form\">\n                <div className=\"form-grid\">\n                  <div className=\"form-field\">\n                    <label>🏷️ Код валюты</label>\n                    <input \n                      value={editCurrency ? editCurrency.code : newCurrency.code} \n                      onChange={(e) => editCurrency \n                        ? setEditCurrency({ ...editCurrency, code: e.target.value }) \n                        : setNewCurrency({ ...newCurrency, code: e.target.value })\n                      } \n                      placeholder=\"USD, EUR, GBP...\" \n                      required \n                      disabled={editCurrency !== null}\n                      className=\"form-input\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-field\">\n                    <label>📝 Наименование</label>\n                    <input \n                      value={editCurrency ? editCurrency.name : newCurrency.name} \n                      onChange={(e) => editCurrency \n                        ? setEditCurrency({ ...editCurrency, name: e.target.value }) \n                        : setNewCurrency({ ...newCurrency, name: e.target.value })\n                      } \n                      placeholder=\"Доллар США...\" \n                      required \n                      disabled={editCurrency !== null}\n                      className=\"form-input\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-field\">\n                    <label>📈 Курс покупки ₽</label>\n                    <input \n                      type=\"number\" \n                      step=\"0.00000001\" \n                      value={editCurrency ? editCurrency.buy_rate : newCurrency.buy_rate} \n                      onChange={(e) => editCurrency \n                        ? setEditCurrency({ ...editCurrency, buy_rate: e.target.value }) \n                        : setNewCurrency({ ...newCurrency, buy_rate: e.target.value })\n                      } \n                      placeholder=\"90.50\" \n                      required\n                      className=\"form-input\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-field\">\n                    <label>📉 Курс продажи ₽</label>\n                    <input \n                      type=\"number\" \n                      step=\"0.00000001\" \n                      value={editCurrency ? editCurrency.sell_rate : newCurrency.sell_rate} \n                      onChange={(e) => editCurrency \n                        ? setEditCurrency({ ...editCurrency, sell_rate: e.target.value }) \n                        : setNewCurrency({ ...newCurrency, sell_rate: e.target.value })\n                      } \n                      placeholder=\"89.50\" \n                      required\n                      className=\"form-input\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"form-actions\">\n                  <button \n                    type=\"submit\" \n                    disabled={loading}\n                    className=\"btn-primary\"\n                  >\n                    {loading ? (\n                      <>\n                        <div className=\"loader\"></div>\n                        Обработка...\n                      </>\n                    ) : (\n                      editCurrency ? (\n                        <>\n                          <span>💾</span>\n                          Обновить валюту\n                        </>\n                      ) : (\n                        <>\n                          <span>➕</span>\n                          Добавить валюту\n                        </>\n                      )\n                    )}\n                  </button>\n                  {editCurrency && (\n                    <button \n                      type=\"button\" \n                      onClick={() => setEditCurrency(null)}\n                      className=\"btn-secondary\"\n                    >\n                      <span>✖️</span>\n                      Отмена\n                    </button>\n                  )}\n                </div>\n              </form>\n            </div>\n\n            {/* Список валют */}\n            <div className=\"currencies-list-section\">\n              <h2 className=\"section-title\">📋 Список валют</h2>\n              \n              {loading && (\n                <div className=\"loading-state\">\n                  <div className=\"loader\"></div>\n                  <p>Загрузка валют...</p>\n                </div>\n              )}\n\n              {!loading && currencies.length === 0 && (\n                <div className=\"empty-state\">\n                  <div className=\"empty-icon\">💱</div>\n                  <h3>Валюты не найдены</h3>\n                  <p>Начните с добавления первой валюты для обмена</p>\n                </div>\n              )}\n\n              {!loading && currencies.length > 0 && (\n                <div className=\"currencies-table\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th>💱 Код</th>\n                        <th>💰 Курс покупки</th>\n                        <th>💰 Курс продажи</th>\n                        <th>📊 Спред</th>\n                        <th>🕒 Обновлено</th>\n                        <th>⚙️ Действия</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {currencies.map(currency => (\n                        <tr key={currency.id}>\n                          <td>\n                            <strong>{currency.code}</strong>\n                            <div className=\"currency-name\">{currency.name}</div>\n                          </td>\n                          <td>\n                            {editCurrency && editCurrency.id === currency.id ? (\n                              <input\n                                type=\"number\"\n                                step=\"0.01\"\n                                value={editCurrency.buy_rate || ''}\n                                onChange={(e) => setEditCurrency({...editCurrency, buy_rate: e.target.value})}\n                                className=\"rate-input\"\n                              />\n                            ) : (\n                              currency.buy_rate.toFixed(2)\n                            )}\n                          </td>\n                          <td>\n                            {editCurrency && editCurrency.id === currency.id ? (\n                              <input\n                                type=\"number\"\n                                step=\"0.01\"\n                                value={editCurrency.sell_rate || ''}\n                                onChange={(e) => setEditCurrency({...editCurrency, sell_rate: e.target.value})}\n                                className=\"rate-input\"\n                              />\n                            ) : (\n                              currency.sell_rate.toFixed(2)\n                            )}\n                          </td>\n                          <td>\n                            <span className=\"spread\">\n                              {((currency.sell_rate - currency.buy_rate) / currency.buy_rate * 100).toFixed(2)}%\n                            </span>\n                          </td>\n                          <td>\n                            <span className=\"updated-time\">\n                              {new Date(currency.updated_at).toLocaleDateString()}\n                            </span>\n                          </td>\n                          <td>\n                            <div className=\"action-buttons\">\n                              {editCurrency && editCurrency.id === currency.id ? (\n                                <>\n                                  <button \n                                    onClick={handleUpdateCurrency}\n                                    className=\"btn-save\"\n                                    title=\"Сохранить\"\n                                  >\n                                    ✓\n                                  </button>\n                                  <button \n                                    onClick={() => setEditCurrency(null)}\n                                    className=\"btn-cancel\"\n                                    title=\"Отменить\"\n                                  >\n                                    ✕\n                                  </button>\n                                </>\n                              ) : (\n                                <button \n                                  onClick={() => setEditCurrency({ ...currency })}\n                                  className=\"btn-edit\"\n                                  title=\"Редактировать\"\n                                >\n                                  ✎\n                                </button>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'limits' && (\n          <div className=\"tab-content\">\n            <div className=\"limits-section\">\n              <h2 className=\"section-title\">⚙️ Ограничения операций</h2>\n              \n              <div className=\"limits-grid\">\n                {operationLimits.map(limit => (\n                  <div key={limit.id} className=\"limit-card\">\n                    <div className=\"limit-header\">\n                      <div className=\"limit-value-display\">\n                        {editingLimit && editingLimit.id === limit.id ? (\n                          <input \n                            type=\"number\" \n                            step=\"0.0001\" \n                            value={editingLimit.limit_value}\n                            onChange={(e) => setEditingLimit({...editingLimit, limit_value: e.target.value})}\n                            className=\"limit-input\"\n                          />\n                        ) : (\n                          <div className=\"limit-value\">{formatRate(limit.limit_value)} ₽</div>\n                        )}\n                      </div>\n                      <div className=\"limit-info\">\n                        <div className=\"limit-name\">{limit.friendly_name}</div>\n                        <div className=\"limit-description\">{limit.description}</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"limit-updated\">\n                      <span className=\"updated-label\">📅 Обновлено:</span>\n                      <span className=\"updated-value\">{formatDate(limit.updated_at)}</span>\n                    </div>\n                    \n                    <div className=\"limit-actions\">\n                      {editingLimit && editingLimit.id === limit.id ? (\n                        <div className=\"action-buttons\">\n                          <button \n                            onClick={handleUpdateLimit}\n                            className=\"btn-save\"\n                            title=\"Сохранить\"\n                          >\n                            <span>💾</span>\n                            Сохранить\n                          </button>\n                          <button \n                            onClick={() => setEditingLimit(null)}\n                            className=\"btn-cancel\"\n                            title=\"Отмена\"\n                          >\n                            <span>❌</span>\n                            Отмена\n                          </button>\n                        </div>\n                      ) : (\n                        <button \n                          onClick={() => setEditingLimit({ ...limit })}\n                          className=\"btn-edit\"\n                          title=\"Редактировать\"\n                        >\n                          <span>✏️</span>\n                          Редактировать\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CurrenciesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}