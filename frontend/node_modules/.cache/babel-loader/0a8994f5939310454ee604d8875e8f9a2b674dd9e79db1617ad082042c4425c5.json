{"ast":null,"code":"import _objectSpread from\"/Users/qntsnc/GolandProjects/exchange-point/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{format}from'date-fns';import{ru}from'date-fns/locale';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AnalyticsPage=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[analyticsData,setAnalyticsData]=useState(null);const[currencies,setCurrencies]=useState([]);const[filters,setFilters]=useState({startDate:format(new Date(),'yyyy-MM-dd'),endDate:format(new Date(),'yyyy-MM-dd'),currency:'all',operationType:'all'});const formatDecimal=value=>value===null||value===undefined?'N/A':parseFloat(value).toFixed(2);const formatRate=value=>value===null||value===undefined?'N/A':parseFloat(value).toFixed(4);const fetchCurrencies=useCallback(async()=>{try{const response=await fetch('http://localhost:8080/api/v1/currencies');if(!response.ok)throw new Error('Failed to fetch currencies');const data=await response.json();setCurrencies(data.data||[]);}catch(err){console.error('Error fetching currencies:',err);setError(prev=>prev?\"\".concat(prev,\"; \\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442: \").concat(err.message):\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442: \".concat(err.message));}},[]);const fetchAnalytics=useCallback(async()=>{setLoading(true);setError('');try{const url=new URL('http://localhost:8080/api/v1/analytics/operations');url.searchParams.append('start_date',filters.startDate);url.searchParams.append('end_date',filters.endDate);if(filters.currency!=='all'&&filters.currency)url.searchParams.append('currency_code',filters.currency);if(filters.operationType!=='all'&&filters.operationType)url.searchParams.append('operation_type',filters.operationType);const response=await fetch(url.toString());if(!response.ok){const errData=await response.json();throw new Error(errData.message||\"Failed to fetch analytics data (\".concat(response.status,\")\"));}const data=await response.json();setAnalyticsData(data.data||null);}catch(err){console.error('Error fetching analytics:',err);setError('Ошибка загрузки аналитических данных: '+err.message);setAnalyticsData(null);}finally{setLoading(false);}},[filters]);useEffect(()=>{fetchCurrencies();},[fetchCurrencies]);const handleFilterChange=e=>{const{name,value}=e.target;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleApplyFilters=()=>{fetchAnalytics();};const SimpleBarChart=_ref=>{let{title,data,labels,colors}=_ref;const total=data.reduce((sum,val)=>sum+val,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"bar-chart\",children:[/*#__PURE__*/_jsx(\"h4\",{children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"bars-container\",children:data.map((value,i)=>{const percentage=total>0?value/total*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"bar-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar-fill\",style:{height:\"\".concat(percentage,\"%\"),backgroundColor:colors[i%colors.length],transition:'height 0.5s ease-in-out'},children:percentage>5&&/*#__PURE__*/_jsx(\"span\",{children:value})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-label\",children:[labels[i],\" \",percentage>0?\"(\".concat(percentage.toFixed(1),\"%)\"):'']})]},i);})})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-6\",children:\"\\u0410\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u0421 \\u0434\\u0430\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:filters.startDate,onChange:handleFilterChange,className:\"input w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u041F\\u043E \\u0434\\u0430\\u0442\\u0443:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:filters.endDate,onChange:handleFilterChange,className:\"input w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u0430:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"currency\",value:filters.currency,onChange:handleFilterChange,className:\"input w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u0412\\u0441\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),currencies.map(curr=>/*#__PURE__*/_jsxs(\"option\",{value:curr.code,children:[curr.code,\" (\",curr.name,\")\"]},curr.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"\\u0422\\u0438\\u043F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"operationType\",value:filters.operationType,onChange:handleFilterChange,className:\"input w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u0412\\u0441\\u0435 \\u0442\\u0438\\u043F\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"buy\",children:\"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sell\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyFilters,className:\"btn btn-primary\",children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})})]}),!loading&&!analyticsData&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"card text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\\\", \\u0447\\u0442\\u043E\\u0431\\u044B \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0430\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435.\"})}),!loading&&analyticsData&&analyticsData.total_operations===0&&/*#__PURE__*/_jsx(\"div\",{className:\"card text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u043B\\u044F \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043D\\u043E\\u0433\\u043E \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0430 \\u0438 \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u043E\\u0432.\"})}),!loading&&analyticsData&&analyticsData.total_operations>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"summary-value\",children:analyticsData.total_operations})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041E\\u0431\\u0449\\u0438\\u0439 \\u043E\\u0431\\u044A\\u0435\\u043C \\u0432 \\u0440\\u0443\\u0431\\u043B\\u044F\\u0445\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"summary-value\",children:[formatDecimal(analyticsData.total_amount_rub),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"summary-value\",children:[analyticsData.client_sells_count,\" \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439 / \",formatDecimal(analyticsData.client_sells_rub_total),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"summary-value\",children:[analyticsData.client_buys_count,\" \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439 / \",formatDecimal(analyticsData.client_buys_rub_total),\" \\u20BD\"]})]}),Object.entries(analyticsData.average_rates).map(_ref2=>{let[currency,rate]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439 \\u043A\\u0443\\u0440\\u0441 \",currency]}),/*#__PURE__*/_jsx(\"p\",{className:\"summary-value\",children:formatRate(rate)})]},\"rate-\".concat(currency));})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\u0413\\u0440\\u0430\\u0444\\u0438\\u043A \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsx(SimpleBarChart,{title:\"\\u0420\\u0430\\u0441\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u0438\\u043F\\u043E\\u0432 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\",data:[analyticsData.client_sells_count,analyticsData.client_buys_count],labels:['Клиент продает валюту','Клиент покупает валюту'],colors:['#4caf50','#2196f3']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435 \\u0432\\u0430\\u043B\\u044E\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-volumes\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0412\\u0430\\u043B\\u044E\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0431\\u044A\\u0435\\u043C \\u0432 \\u0432\\u0430\\u043B\\u044E\\u0442\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0431\\u044A\\u0435\\u043C \\u0432 \\u0440\\u0443\\u0431\\u043B\\u044F\\u0445\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:analyticsData.currency_volumes.map((cv,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cv.currency_name}),/*#__PURE__*/_jsx(\"td\",{children:cv.currency_code}),/*#__PURE__*/_jsx(\"td\",{children:formatDecimal(cv.volume)}),/*#__PURE__*/_jsxs(\"td\",{children:[formatDecimal(cv.rub_volume),\" \\u20BD\"]})]},index))})]})})]})]})]});};export default AnalyticsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","format","ru","jsx","_jsx","jsxs","_jsxs","AnalyticsPage","loading","setLoading","error","setError","analyticsData","setAnalyticsData","currencies","setCurrencies","filters","setFilters","startDate","Date","endDate","currency","operationType","formatDecimal","value","undefined","parseFloat","toFixed","formatRate","fetchCurrencies","response","fetch","ok","Error","data","json","err","console","prev","concat","message","fetchAnalytics","url","URL","searchParams","append","toString","errData","status","handleFilterChange","e","name","target","_objectSpread","handleApplyFilters","SimpleBarChart","_ref","title","labels","colors","total","reduce","sum","val","className","children","map","i","percentage","style","height","backgroundColor","length","transition","type","onChange","curr","code","id","onClick","total_operations","total_amount_rub","client_sells_count","client_sells_rub_total","client_buys_count","client_buys_rub_total","Object","entries","average_rates","_ref2","rate","currency_volumes","cv","index","currency_name","currency_code","volume","rub_volume"],"sources":["/Users/qntsnc/GolandProjects/exchange-point/frontend/src/pages/AnalyticsPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\n\nconst AnalyticsPage = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [analyticsData, setAnalyticsData] = useState(null);\n  const [currencies, setCurrencies] = useState([]);\n  const [filters, setFilters] = useState({\n    startDate: format(new Date(), 'yyyy-MM-dd'),\n    endDate: format(new Date(), 'yyyy-MM-dd'),\n    currency: 'all',\n    operationType: 'all'\n  });\n\n  const formatDecimal = (value) => (value === null || value === undefined ? 'N/A' : parseFloat(value).toFixed(2));\n  const formatRate = (value) => (value === null || value === undefined ? 'N/A' : parseFloat(value).toFixed(4));\n\n  const fetchCurrencies = useCallback(async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/v1/currencies');\n      if (!response.ok) throw new Error('Failed to fetch currencies');\n      const data = await response.json();\n      setCurrencies(data.data || []);\n    } catch (err) {\n      console.error('Error fetching currencies:', err);\n      setError(prev => prev ? `${prev}; Ошибка загрузки валют: ${err.message}` : `Ошибка загрузки валют: ${err.message}`);\n    }\n  }, []);\n\n  const fetchAnalytics = useCallback(async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const url = new URL('http://localhost:8080/api/v1/analytics/operations');\n      url.searchParams.append('start_date', filters.startDate);\n      url.searchParams.append('end_date', filters.endDate);\n      if (filters.currency !== 'all' && filters.currency) url.searchParams.append('currency_code', filters.currency);\n      if (filters.operationType !== 'all' && filters.operationType) url.searchParams.append('operation_type', filters.operationType);\n\n      const response = await fetch(url.toString());\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || `Failed to fetch analytics data (${response.status})`);\n      }\n      const data = await response.json();\n      setAnalyticsData(data.data || null);\n    } catch (err) {\n      console.error('Error fetching analytics:', err);\n      setError('Ошибка загрузки аналитических данных: ' + err.message);\n      setAnalyticsData(null);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters]);\n\n  useEffect(() => {\n    fetchCurrencies();\n  }, [fetchCurrencies]);\n\n  const handleFilterChange = (e) => {\n    const { name, value } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleApplyFilters = () => {\n    fetchAnalytics();\n  };\n\n  const SimpleBarChart = ({ title, data, labels, colors }) => {\n    const total = data.reduce((sum, val) => sum + val, 0);\n    return (\n      <div className=\"bar-chart\">\n        <h4>{title}</h4>\n        <div className=\"bars-container\">\n          {data.map((value, i) => {\n            const percentage = total > 0 ? (value / total) * 100 : 0;\n            return (\n              <div key={i} className=\"bar-item\">\n                <div\n                  className=\"bar-fill\"\n                  style={{\n                    height: `${percentage}%`,\n                    backgroundColor: colors[i % colors.length],\n                    transition: 'height 0.5s ease-in-out',\n                  }}\n                >\n                  {percentage > 5 && <span>{value}</span>}\n                </div>\n                <div className=\"bar-label\">{labels[i]} {percentage > 0 ? `(${percentage.toFixed(1)}%)` : ''}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"card\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">\n          Аналитика операций\n        </h1>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              С даты:\n            </label>\n            <input\n              type=\"date\"\n              name=\"startDate\"\n              value={filters.startDate}\n              onChange={handleFilterChange}\n              className=\"input w-full\"\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              По дату:\n            </label>\n            <input\n              type=\"date\"\n              name=\"endDate\"\n              value={filters.endDate}\n              onChange={handleFilterChange}\n              className=\"input w-full\"\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Валюта:\n            </label>\n            <select\n              name=\"currency\"\n              value={filters.currency}\n              onChange={handleFilterChange}\n              className=\"input w-full\"\n            >\n              <option value=\"all\">Все валюты</option>\n              {currencies.map(curr => (\n                <option key={curr.id} value={curr.code}>{curr.code} ({curr.name})</option>\n              ))}\n            </select>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Тип операции:\n            </label>\n            <select\n              name=\"operationType\"\n              value={filters.operationType}\n              onChange={handleFilterChange}\n              className=\"input w-full\"\n            >\n              <option value=\"all\">Все типы</option>\n              <option value=\"buy\">Покупка</option>\n              <option value=\"sell\">Продажа</option>\n            </select>\n          </div>\n        </div>\n        \n        <div className=\"mt-6 flex justify-end\">\n          <button\n            onClick={handleApplyFilters}\n            className=\"btn btn-primary\"\n          >\n            Применить\n          </button>\n        </div>\n      </div>\n\n      {!loading && !analyticsData && !error && (\n        <div className=\"card text-center py-12\">\n          <p className=\"text-gray-500\">\n            Нажмите \"Применить\", чтобы загрузить аналитические данные.\n          </p>\n        </div>\n      )}\n\n      {!loading && analyticsData && analyticsData.total_operations === 0 && (\n        <div className=\"card text-center py-12\">\n          <p className=\"text-gray-500\">\n            Нет данных для указанного периода и фильтров.\n          </p>\n        </div>\n      )}\n\n      {!loading && analyticsData && analyticsData.total_operations > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Общая статистика\n            </h3>\n            <div className=\"summary-cards\">\n              <div className=\"summary-card\">\n                <h4>Всего операций</h4>\n                <p className=\"summary-value\">{analyticsData.total_operations}</p>\n              </div>\n              <div className=\"summary-card\">\n                <h4>Общий объем в рублях</h4>\n                <p className=\"summary-value\">{formatDecimal(analyticsData.total_amount_rub)} ₽</p>\n              </div>\n              <div className=\"summary-card\">\n                <h4>Продажи валюты</h4>\n                <p className=\"summary-value\">\n                  {analyticsData.client_sells_count} операций / {formatDecimal(analyticsData.client_sells_rub_total)} ₽\n                </p>\n              </div>\n              <div className=\"summary-card\">\n                <h4>Покупки валюты</h4>\n                <p className=\"summary-value\">\n                  {analyticsData.client_buys_count} операций / {formatDecimal(analyticsData.client_buys_rub_total)} ₽\n                </p>\n              </div>\n              {Object.entries(analyticsData.average_rates).map(([currency, rate]) => (\n                <div key={`rate-${currency}`} className=\"summary-card\">\n                  <h4>Средний курс {currency}</h4>\n                  <p className=\"summary-value\">{formatRate(rate)}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              График операций\n            </h3>\n            <SimpleBarChart\n              title=\"Распределение типов операций\"\n              data={[analyticsData.client_sells_count, analyticsData.client_buys_count]}\n              labels={['Клиент продает валюту', 'Клиент покупает валюту']}\n              colors={['#4caf50', '#2196f3']}\n            />\n          </div>\n          \n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Популярные валюты\n            </h3>\n            <div className=\"currency-volumes\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Валюта</th>\n                    <th>Код</th>\n                    <th>Объем в валюте</th>\n                    <th>Объем в рублях</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {analyticsData.currency_volumes.map((cv, index) => (\n                    <tr key={index}>\n                      <td>{cv.currency_name}</td>\n                      <td>{cv.currency_code}</td>\n                      <td>{formatDecimal(cv.volume)}</td>\n                      <td>{formatDecimal(cv.rub_volume)} ₽</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AnalyticsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}